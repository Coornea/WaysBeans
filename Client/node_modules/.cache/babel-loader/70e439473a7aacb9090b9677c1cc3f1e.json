{"ast":null,"code":"var _jsxFileName = \"/home/physicoornea/Documents/Documents/Waysbeans-main/Client/src/components/SignModal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport styles from \"../styles/Home.module.css\";\nimport { UserContext } from \"../context/userContext\";\nimport { API, setAuthToken } from \"../config/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SignModal() {\n  _s();\n\n  const [register, setRegister] = useState(false);\n  const [login, setLogin] = useState(false);\n  const [state, dispatch] = useContext(UserContext); //   const [message, setMessage] = useState(null);\n\n  const [regForm, setRegForm] = useState({\n    email: \"\",\n    password: \"\",\n    fullname: \"\"\n  });\n  const {\n    email,\n    password,\n    fullname\n  } = regForm; //login form (state)\n\n  const [logForm, setLogForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    logEmail,\n    logPassword\n  } = logForm;\n\n  const handleRegChange = e => {\n    setRegForm({ ...regForm,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleLogChange = e => {\n    setLogForm({ ...logForm,\n      [e.target.name]: e.target.value\n    });\n  }; //register handle\n\n\n  const handleRegister = async e => {\n    try {\n      e.preventDefault(); // Create Configuration Content-type\n\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      }; // Convert form data to string\n\n      const body = JSON.stringify(regForm); // Insert data user to database\n\n      const response = await API.post(\"/register\", body, config); //close & empty modal\n\n      setRegister(false);\n      setRegForm({\n        email: \"\",\n        password: \"\",\n        fullname: \"\"\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }; //login handle\n\n\n  const handleLogin = async e => {\n    try {\n      e.preventDefault(); // Create Configuration Content-type\n\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      }; // Convert form data to string\n\n      const body = JSON.stringify(logForm); // Insert data user to database\n\n      const response = await API.post(\"/login\", body, config); //close & empty modal\n\n      setLogin(false);\n      setLogForm({\n        email: \"\",\n        password: \"\"\n      }); //notification & change state\n\n      if (response.data.status === \"success\") {\n        await dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: response.data.data.user\n        });\n\n        if (localStorage.token) {\n          setAuthToken(localStorage.token);\n        }\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }; //Register modal toggle\n\n\n  const handRegClose = () => setRegister(false);\n\n  const handReg = () => setRegister(true); //login modal toggle\n\n\n  const handLogClose = () => setLogin(false);\n\n  const handLog = () => setLogin(true);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      show: register,\n      onHide: handRegClose,\n      className: styles.modalform,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        style: {\n          paddingBottom: \"13px\",\n          paddingTop: \"25px\",\n          width: \"416px\",\n          paddingLeft: \"25px\",\n          borderBottom: \"0 none\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.formTitle,\n            style: {\n              marginBottom: 0\n            },\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: styles.modalBody,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: styles.form,\n          onSubmit: handleRegister,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            onChange: handleRegChange,\n            value: email,\n            name: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            onChange: handleRegChange,\n            value: password,\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Full Name\",\n            onChange: handleRegChange,\n            value: fullname,\n            name: \"fullname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        className: styles.formFooter,\n        style: {\n          borderTop: \"0 none\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Already have an account ? Click\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginLeft: 0\n          },\n          onClick: () => {\n            handRegClose();\n            handLog();\n          },\n          className: styles.footerLink,\n          children: \"Here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: login,\n      onHide: handLogClose,\n      className: styles.modalform,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        style: {\n          paddingBottom: \"13px\",\n          paddingTop: \"25px\",\n          width: \"416px\",\n          paddingLeft: \"25px\",\n          borderBottom: \"0 none\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.formTitle,\n            style: {\n              marginBottom: 0\n            },\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: styles.modalBody,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: styles.form,\n          onSubmit: handleLogin,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            id: \"email\",\n            onChange: handleLogChange,\n            required: true,\n            value: logEmail,\n            name: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            onChange: handleLogChange,\n            value: logPassword,\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        className: styles.formFooter,\n        style: {\n          borderTop: \"0 none\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Don't have an account ? Click\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginLeft: 0\n          },\n          onClick: () => {\n            handLogClose();\n            handReg();\n          },\n          className: styles.footerLink,\n          children: \"Here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignModal, \"yyHTPz9h7GICySTyyxGcDpTWyWE=\");\n\n_c = SignModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignModal\");","map":{"version":3,"sources":["/home/physicoornea/Documents/Documents/Waysbeans-main/Client/src/components/SignModal.js"],"names":["React","useState","useContext","Modal","styles","UserContext","API","setAuthToken","SignModal","register","setRegister","login","setLogin","state","dispatch","regForm","setRegForm","email","password","fullname","logForm","setLogForm","logEmail","logPassword","handleRegChange","e","target","name","value","handleLogChange","handleRegister","preventDefault","config","headers","body","JSON","stringify","response","post","error","console","log","handleLogin","data","status","type","payload","user","localStorage","token","handRegClose","handReg","handLogClose","handLog","modalform","paddingBottom","paddingTop","width","paddingLeft","borderBottom","formTitle","marginBottom","modalBody","form","formFooter","borderTop","marginLeft","footerLink"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport styles from \"../styles/Home.module.css\";\nimport { UserContext } from \"../context/userContext\";\n\nimport { API, setAuthToken } from \"../config/api\";\n\nexport default function SignModal() {\n  const [register, setRegister] = useState(false);\n  const [login, setLogin] = useState(false);\n  const [state, dispatch] = useContext(UserContext);\n  //   const [message, setMessage] = useState(null);\n  const [regForm, setRegForm] = useState({\n    email: \"\",\n    password: \"\",\n    fullname: \"\",\n  });\n  const { email, password, fullname } = regForm;\n\n  //login form (state)\n  const [logForm, setLogForm] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const { logEmail, logPassword } = logForm;\n  const handleRegChange = (e) => {\n    setRegForm({\n      ...regForm,\n      [e.target.name]: e.target.value,\n    });\n  };\n  const handleLogChange = (e) => {\n    setLogForm({\n      ...logForm,\n      [e.target.name]: e.target.value,\n    });\n  };\n  //register handle\n  const handleRegister = async (e) => {\n    try {\n      e.preventDefault();\n\n      // Create Configuration Content-type\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      };\n\n      // Convert form data to string\n      const body = JSON.stringify(regForm);\n\n      // Insert data user to database\n      const response = await API.post(\"/register\", body, config);\n\n      //close & empty modal\n      setRegister(false);\n      setRegForm({\n        email: \"\",\n        password: \"\",\n        fullname: \"\",\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  //login handle\n  const handleLogin = async (e) => {\n    try {\n      e.preventDefault();\n\n      // Create Configuration Content-type\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      };\n      // Convert form data to string\n      const body = JSON.stringify(logForm);\n\n      // Insert data user to database\n      const response = await API.post(\"/login\", body, config);\n\n      //close & empty modal\n      setLogin(false);\n      setLogForm({ email: \"\", password: \"\" });\n\n      //notification & change state\n      if (response.data.status === \"success\") {\n        await dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: response.data.data.user,\n        });\n        if (localStorage.token) {\n          setAuthToken(localStorage.token);\n        }\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  //Register modal toggle\n  const handRegClose = () => setRegister(false);\n  const handReg = () => setRegister(true);\n\n  //login modal toggle\n  const handLogClose = () => setLogin(false);\n  const handLog = () => setLogin(true);\n  return (\n    <div>\n      <Modal show={register} onHide={handRegClose} className={styles.modalform}>\n        <Modal.Header\n          style={{\n            paddingBottom: \"13px\",\n            paddingTop: \"25px\",\n            width: \"416px\",\n            paddingLeft: \"25px\",\n            borderBottom: \"0 none\",\n          }}\n        >\n          <Modal.Title>\n            <p className={styles.formTitle} style={{ marginBottom: 0 }}>\n              Register\n            </p>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body className={styles.modalBody}>\n          <form className={styles.form} onSubmit={handleRegister}>\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              onChange={handleRegChange}\n              value={email}\n              name=\"email\"\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={handleRegChange}\n              value={password}\n              name=\"password\"\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Full Name\"\n              onChange={handleRegChange}\n              value={fullname}\n              name=\"fullname\"\n            />\n\n            <button type=\"submit\">Register</button>\n          </form>\n        </Modal.Body>\n        <Modal.Footer\n          className={styles.formFooter}\n          style={{ borderTop: \"0 none\" }}\n        >\n          <p>Already have an account ? Click</p>\n          <p\n            style={{ marginLeft: 0 }}\n            onClick={() => {\n              handRegClose();\n              handLog();\n            }}\n            className={styles.footerLink}\n          >\n            Here\n          </p>\n        </Modal.Footer>\n      </Modal>\n\n      <Modal show={login} onHide={handLogClose} className={styles.modalform}>\n        <Modal.Header\n          style={{\n            paddingBottom: \"13px\",\n            paddingTop: \"25px\",\n            width: \"416px\",\n            paddingLeft: \"25px\",\n            borderBottom: \"0 none\",\n          }}\n        >\n          <Modal.Title>\n            <p className={styles.formTitle} style={{ marginBottom: 0 }}>\n              Login\n            </p>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body className={styles.modalBody}>\n          <form className={styles.form} onSubmit={handleLogin}>\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              id=\"email\"\n              onChange={handleLogChange}\n              required\n              value={logEmail}\n              name=\"email\"\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={handleLogChange}\n              value={logPassword}\n              name=\"password\"\n            />\n            <button type=\"submit\">Login</button>\n          </form>\n        </Modal.Body>\n        <Modal.Footer\n          className={styles.formFooter}\n          style={{ borderTop: \"0 none\" }}\n        >\n          <p>Don't have an account ? Click</p>\n          <p\n            style={{ marginLeft: 0 }}\n            onClick={() => {\n              handLogClose();\n              handReg();\n            }}\n            className={styles.footerLink}\n          >\n            Here\n          </p>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}